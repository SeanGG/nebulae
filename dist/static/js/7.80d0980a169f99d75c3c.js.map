{"version":3,"sources":["webpack:///./src/page/appApi/appApi.vue?b246","webpack:///./src/page/appApi/appApi.vue","webpack:///./src/page/appApi/appApi.vue?8634","webpack:///./src/page/appApi/index.js","webpack:///./src/api/index.js","webpack:///./src/configs/index.js","webpack:///./src/utils/http.js","webpack:///src/page/appApi/appApi.vue","webpack:///./src/utils/platform.js"],"names":["appApi_appApivue_type_script_lang_js","appApi_appApi","Object","componentNormalizer","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","_s","userAgent","_l","item","index","key","gridName","apiCell","apiIndex","attrs","data-key","on","click","testApi","name","desc","__webpack_exports__","env","console","log","configs","API_DAtestTA_getPrem","test1","module","exports","chunkMode","callApi","root","mockHost","host","vue__WEBPACK_IMPORTED_MODULE_1__","use","vue_resource__WEBPACK_IMPORTED_MODULE_2__","http","options","emulateJSON","emulateHTTP","get","opts","$http","url","query","data","_configs___WEBPACK_IMPORTED_MODULE_3___default","a","params","then","response","res","babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default","resolve","catch","err","reject","testAgent","_utils_platform__WEBPACK_IMPORTED_MODULE_2__","_ua","window","navigator","isApp","test","isWeixin"],"mappings":"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","file":"static/js/7.80d0980a169f99d75c3c.js","sourcesContent":["import mod from \"-!../../../node_modules/_babel-loader@7.1.4@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.0.7@vue-loader/lib/index.js??vue-loader-options!./appApi.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@7.1.4@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.0.7@vue-loader/lib/index.js??vue-loader-options!./appApi.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./appApi.vue?vue&type=template&id=55d3c72e\"\nimport script from \"./appApi.vue?vue&type=script&lang=js\"\nexport * from \"./appApi.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.0.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_vm._m(0),_vm._v(\" \"),_c('main',[_c('section',{staticClass:\"alert\"},[_vm._v(\"当前环境：\\n      \"),_c('span',{staticClass:\"agent\"},[_vm._v(_vm._s(_vm.userAgent))])]),_vm._v(\" \"),_vm._l((_vm.apiList),function(item,index){return _c('section',{key:index},[_c('section',{staticClass:\"h2\"},[_vm._v(_vm._s(item.gridName))]),_vm._v(\" \"),_c('ul',{staticClass:\"api-list\"},_vm._l((item.gridList),function(apiCell,apiIndex){return _c('li',{key:apiIndex},[_c('section',{staticClass:\"api-cell\",attrs:{\"data-key\":apiCell.key},on:{\"click\":_vm.testApi}},[_c('section',{staticClass:\"api-btn\"},[_vm._v(_vm._s(apiCell.name))]),_vm._v(\" \"),_c('section',{staticClass:\"api-desc\"},[_vm._v(_vm._s(apiCell.desc))])])])}))])})],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',[_c('section',{staticClass:\"title\"},[_vm._v(\"appApi列表\")]),_vm._v(\" \"),_c('section',{staticClass:\"description\"},[_vm._v(\"app提供原生功能接口\")])])}]\nexport { render, staticRenderFns }","import './appApi.scss'\nimport AppApi from './appApi.vue'\n\nexport default AppApi\n","/**\n * 统一API方法清单定义文件配置\n * 示例 api (json)\n * 规范：使用API_ACTION_NAME格式（api标识别，方法类型，方法名称）\n * ACTION名称约定：\n * QUERY：查询\n * ADD：添加\n * UPDATE：更新\n * DEL：删除\n * @type {String}\n */\nconst env = process.env.NODE_ENV\nconsole.log('config=' + env)\nlet devApi = '/mock' // 模拟地址 /mock\nconst api = env === 'production' ? '' : devApi\nconst configs = {\n  API_DAtestTA_getPrem: `${api}/promote/standard/getPrem.json`,\n  test1: `${api}/test1.json`\n}\nmodule.exports = configs\n","/**\n * 常量预配置\n * @type {Object}\n */\nconst configs = {\n  chunkMode: true,\n  callApi: true, // 是否调用真实API服务，否则mock服务调试\n  root: '', // 路由根路径,一般在使用虚拟目录跳转时配置\n  mockHost: 'https://www.easy-mock.com/mock/5a38ab6ae859572ed685340b/api', // easy-mock url\n  host: '' // 请求的服务host地址：http://xxxx.zhongan.com/api/xxxx\n}\nmodule.exports = configs\n","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nimport config from '../configs/'\nVue.use(VueResource)\n\nVue.http.options.emulateJSON = false\nVue.http.options.emulateHTTP = true\n\n/**\n * initLoad\n * @authors zhanwang.ye\n * @param  {...[type]} requests [description]\n * @return {[type]}             [description]\n */\nexport const initLoad = requests => {\n  // const $http = Vue.http\n\n  if (requests.length > 0) {\n    let reqlist = []\n    requests.forEach((item, index) => {\n      reqlist.push(item)\n    })\n    return Promise.all(reqlist)\n      .then(data => {\n        return Promise.resolve(data)\n      })\n      .catch(res => {\n        if (!res.ok) {\n          switch (res.status) {\n            case 404:\n              window.location.href = '/404'\n              break\n            default:\n              console.log(res)\n              alert('请求出错了！')\n              break\n          }\n        }\n        return Promise.reject(res)\n      })\n  }\n  return\n}\n\n/**\n * get request\n * @authors zhanwang.ye\n * @param  {[type]} url   [description]\n * @param  {[type]} query [description]\n * @return {[type]}       [description]\n */\nexport const get = (opts) => {\n  let $http = Vue.http\n\n  let url = opts.url\n  let query = opts.data\n\n  return $http\n    .get(config.callApi ? `${config.host}` + url : `${config.mockHost}` + url, {\n      params: query\n    })\n    .then(response => {\n      let res = response.data\n      return Promise.resolve(res)\n    })\n    .catch(err => {\n      console.log(`request get error:`)\n      console.log(err)\n      return Promise.reject(err)\n    })\n}\n\n/**\n * post request\n * @authors zhanwang.ye\n * @param  {[type]} url   [description]\n * @param  {[type]} query [description]\n * @return {[type]}       [description]\n */\nexport const post = (opts) => {\n  let $http = Vue.http\n\n  let url = opts.url\n  let data = opts.data\n  return $http\n    .post(config.callApi ? `${config.host}` + url : `${config.mockHost}` + url, data)\n    .then(response => {\n      let res = response.data\n      return Promise.resolve(res)\n    })\n    .catch(err => {\n      console.log(`request post error:`)\n      console.log(err)\n      return Promise.reject(err)\n    })\n}\n\n/**\n * jsonp request\n * @authors zhanwang.ye\n * @param  {[type]} url   [description]\n * @param  {[type]} query [description]\n * @return {[type]}       [description]\n */\nexport const getJsonp = (url, query) => {\n  let $http = Vue.http\n  return $http\n    .jsonp(config.callApi ? `${config.host}` + url : `${config.mockHost}` + url, query)\n    .then(response => {\n      let res = response.data\n      return Promise.resolve(res)\n    })\n    .catch(err => {\n      console.log(`request jsonp error:`)\n      console.log(err)\n      return Promise.reject(err)\n    })\n}\n/**\n * 表单提交\n * @param string url\n * @param string method  请求方式, POST, GET ...\n * @param object params  请求数据\n */\nexport const formSubmit = ({ url, method, params, target }) => {\n  const hasOwn = {}.hasOwnProperty\n\n  if (typeof window === 'undefined') {\n    console.log(`Not a browser, form submit url: ${url}`)\n    return\n  }\n  const form = document.createElement('form')\n  form.setAttribute('method', method || 'POST')\n  form.setAttribute('action', url)\n  if (target) {\n    form.setAttribute('target', target)\n  }\n  for (const key in params) {\n    if (hasOwn.call(params, key)) {\n      const hiddenField = document.createElement('input')\n      hiddenField.setAttribute('type', 'hidden')\n      hiddenField.setAttribute('name', key)\n      hiddenField.setAttribute('value', params[key])\n      form.appendChild(hiddenField)\n    }\n  }\n  // 解决js脚本调用新窗口导致的拦截问题\n  const submitBtnField = document.createElement('input')\n  submitBtnField.setAttribute('type', 'submit')\n  submitBtnField.setAttribute('style', 'opacity:0;display:block;width:0;height:0')\n  submitBtnField.setAttribute('class', 'zaPayBtn')\n  form.appendChild(submitBtnField)\n\n  document.body.appendChild(form)\n  submitBtnField.onclick = function(ev) {\n    form.submit()\n  }\n  submitBtnField.click()\n}\n\nexport default {\n  initLoad,\n  get,\n  post,\n  getJsonp,\n  formSubmit\n}\n","<template>\n  <div class=\"content\">\n    <header>\n      <section class=\"title\">appApi列表</section>\n      <section class=\"description\">app提供原生功能接口</section>\n    </header>\n    <main>\n      <section class=\"alert\">当前环境：\n        <span class=\"agent\">{{userAgent}}</span>\n      </section>\n      <!-- api分类1 -->\n      <section :key=\"index\" v-for=\"(item,index) in apiList\">\n        <section class=\"h2\">{{item.gridName}}</section>\n        <ul class=\"api-list\">\n          <li :key=\"apiIndex\" v-for=\"(apiCell, apiIndex) in item.gridList\">\n            <section class=\"api-cell\" @click=\"testApi\" :data-key=\"apiCell.key\">\n              <section class=\"api-btn\">{{apiCell.name}}</section>\n              <section class=\"api-desc\">{{apiCell.desc}}</section>\n            </section>\n          </li>\n        </ul>\n      </section>\n    </main>\n  </div>\n</template>\n\n<script>\nimport * as http from '@/utils/http'\nimport * as api from '@/api/'\nimport { isApp, isWeixin } from '@/utils/platform'\nexport default {\n  name: 'Invite',\n  data () {\n    return {\n      userAgent: '当前环境计算中...',\n      apiList: [\n        {\n          gridName: 'api分类1',\n          gridList: [\n            {\n              name: 'app是否已安装',\n              key: 'isAppCanOpen',\n              desc: 'app是否已安装'\n            },\n            {\n              name: '打开app',\n              key: 'openApp',\n              desc: '打开app'\n            },\n            {\n              name: '测试奖励弹框',\n              key: 'taskRewardAlert',\n              desc: '测试奖励弹框'\n            },\n            {\n              name: '隐藏导航栏',\n              key: 'hideNavigation',\n              desc: '隐藏导航栏'\n            },\n            {\n              name: '显示导航栏',\n              key: 'showNavigation',\n              desc: '显示导航栏'\n            }\n          ]\n        },\n        {\n          gridName: 'api分类测试',\n          gridList: [\n            {\n              name: '测试接口1',\n              key: 'aa',\n              desc: '测试描述aa'\n            },\n            {\n              name: '测试接口2',\n              key: 'bb',\n              desc: '测试描述bb'\n            }\n          ]\n        }\n      ]\n    }\n  },\n  computed: {},\n  created () {\n    this.testAgent();\n  },\n  methods: {\n    testAgent () {\n      const isAppStatus = isApp(),\n        isWeixinStatus = isWeixin()\n\n      if (isAppStatus) {\n        this.userAgent = 'app'\n      } else if (isWeixinStatus) {\n        this.userAgent = 'weixin'\n      } else {\n        this.userAgent = 'h5'\n      }\n    },\n    testApi (e) {\n      if (this.userAgent && this.userAgent === \"h5\") {\n        alert('当前环境不在app内，无法调用app接口');\n        return;\n      }\n      const key = e.currentTarget.dataset.key;\n      try {\n        eval(`this.${key}(key)`)\n      } catch (error) {\n        console.error(`不存在 ${key} 方法 !请确认是否正确配置`)\n      }\n    },\n    // app方法\n    isAppCanOpen (name) {\n      const key = name || 'unknowApi-isAppCanOpen'\n      try {\n        webkit.messageHandlers.isAppCanOpen.postMessage({ url: \"wxc21a915b1ea48402://\" })\n      } catch (error) {\n        console.error(`The native ${key} not exist !`)\n      }\n    },\n    openApp (name) {\n      const key = name || 'unknowApi-openApp'\n      try {\n        webkit.messageHandlers.openApp.postMessage({ url: \"wxc21a915b1ea48402://\" })\n      } catch (error) {\n        console.error(`The native ${key} not exist !`)\n      }\n    },\n    taskRewardAlert (name) {\n      const key = name || 'unknowApi-openApp'\n      try {\n        webkit.messageHandlers.taskRewardAlert.postMessage({ title: \"任务奖励测试\", coin: 0.2, power: 0 })\n      } catch (error) {\n        console.error(`The native ${key} not exist !`)\n      }\n    },\n    showNavigation (name) {\n      const key = name || 'unknowApi-openApp'\n      try {\n        webkit.messageHandlers.showNavigation.postMessage({})\n      } catch (error) {\n        console.error(`The native ${key} not exist !`)\n      }\n    },\n    hideNavigation (name) {\n      const key = name || 'unknowApi-openApp'\n      try {\n        webkit.messageHandlers.hideNavigation.postMessage({})\n      } catch (error) {\n        console.error(`The native ${key} not exist !`)\n      }\n    }\n  }\n}\n</script>\n","let _ua = window.navigator.userAgent\n\nexport const isApp = () => {\n  return /zhonganwebview/i.test(_ua)\n}\n\nexport const isWeixin = () => {\n  return /micromessenger/i.test(_ua)\n}\n\n// 手机类型判定\nexport const typePhone = () => {\n  // const u = navigator.userAgent,\n    // device = ''\n  if (_ua.indexOf('Android') > -1 || _ua.indexOf('Linux') > -1) {\n    return 'android'\n  } else if (_ua.indexOf('iPhone') > -1) {\n    return 'ios'\n  }\n}\n"],"sourceRoot":""}